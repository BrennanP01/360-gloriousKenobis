{"ast":null,"code":"import _classCallCheck from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useState,useEffect,useRef}from'react';import'./App.css';import Sound from'react-sound';import facedraw from'./facedraw.png';import soundToPlay from'./whistle.mp3';import{randomNumber,randomizeColor}from'./Functions.js';/************************************************************\n* This class is responsible of building the business logic  *\n* The class build the header, body and footer of the mosaic *\n************************************************************/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),newRendering=_useState2[0],SetNewRendering=_useState2[1];var _useState3=useState(12),_useState4=_slicedToArray(_useState3,1),numberCells=_useState4[0];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,1),numberShapes=_useState6[0];/*********************************************\n\t* Function to create a table with:           *\n\t*\t\tThe shape                            *\n\t*\t\tCode to print in the foreground      *\n\t*********************************************/function createTable(){var table=[];for(var i=1;i<numberCells*numberCells+1;i++){var randShape=randomNumber(0,numberShapes);var randCode=randomNumber(65,91);var randLetter=String.fromCharCode(randCode);var indexString=i.toString();var shapeForm='shape'+randShape.toString();table.push(/*#__PURE__*/_jsx(Shape,{id:indexString,name:shapeForm,size:numberCells,value:randLetter},indexString));}return table;}/******************************************************\n\t* Function to refresh the complete mosaic with random *\n\t* shapes, characters and colors                       *\n\t******************************************************/function forceRandom(){if(newRendering){SetNewRendering(false);}else{SetNewRendering(true);}}var table=createTable();return/*#__PURE__*/_jsxs(\"div\",{className:\"base\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"circle1\",style:{backgroundColor:'red',color:'red'}}),/*#__PURE__*/_jsx(\"button\",{className:\"circle1\",style:{backgroundColor:'green',color:'green'}}),/*#__PURE__*/_jsx(\"button\",{className:\"circle1\",style:{backgroundColor:'yellow',color:'yellow'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mosaic\",children:table}),/*#__PURE__*/_jsx(Footer,{forceRandom:forceRandom})]});}/*********************************************************************\n* This class is responsible of building the footer of our mosaic app *\n* The footer includes the button to start/stop the timer             *\n* and the current timer value                                        *\n*********************************************************************/function Footer(_ref){var forceRandom=_ref.forceRandom;var startCount=useState(true);var _useState7=useState(60),_useState8=_slicedToArray(_useState7,2),counter=_useState8[0],SetCounter=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPlaying=_useState10[0],SetIsPlaying=_useState10[1];var countRef=useRef(counter);countRef.current=counter;/**********************************************\n\t* Function to refresh the current timer value *\n\t**********************************************/useEffect(function(){var interval;if(startCount){var el=document.getElementById('counter');interval=setInterval(function(){SetCounter(function(currCounter){return currCounter-1;});var currCounter=countRef.current;el.innerHTML=currCounter;},1000);}else{clearInterval(interval);}return function(){return clearInterval(interval);};},[startCount]);/*******************************************************************\n\t* Function to reset the timer and prepare for next temporization   *\n\t* Also, it launches a sound when the timer reach the value of zero *\n\t*******************************************************************/var ResetCounter=function ResetCounter(){SetCounter(60);forceRandom();};/***************************************************************\n\t* Function fired when the music ends to avoid restarting again *\n\t***************************************************************/var handleSongFinishedPlaying=function handleSongFinishedPlaying(){SetIsPlaying(!isPlaying);console.log(isPlaying);};var currCounter=countRef.current;var backColor;if(currCounter===0){ResetCounter();SetIsPlaying(!isPlaying);}else if(currCounter<=10){backColor='red';}else{backColor='#dddddd';}return/*#__PURE__*/_jsxs(\"div\",{className:\"footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"centered\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"randbutton\",className:\"randbutton\",onClick:function onClick(){return forceRandom();},children:\"Randomize!\"}),/*#__PURE__*/_jsx(\"label\",{className:\"count_label\",children:\"Timer:\"}),/*#__PURE__*/_jsx(\"label\",{id:\"counter\",className:\"counter\",style:{backgroundColor:backColor},children:counter})]}),/*#__PURE__*/_jsx(Sound,{url:soundToPlay,playStatus:isPlaying?Sound.status.PLAYING:Sound.status.STOPPED,onFinishedPlaying:handleSongFinishedPlaying})]});}/********************************************************************\n* This class is responsible for building every cell of the mosaic   *\n* The class receive the shape and the foreground character to print *\n* and calculate random color codes for these elements               *\n********************************************************************/var Shape=/*#__PURE__*/function(_Component){_inherits(Shape,_Component);var _super=_createSuper(Shape);function Shape(props){var _this;_classCallCheck(this,Shape);_this=_super.call(this,props);_this.refButton=/*#__PURE__*/React.createRef();_this.clickShape=_this.clickShape.bind(_assertThisInitialized(_this));_this.state={value:null,innerHTML:null};return _this;}/***********************************************************\n\t* Function to update a single shape. Everytime is accessed *\n\t* the character is swapped to an image and when accessed   *\n\t* again, recovers the character associated to the shape    *\n\t* Shape and colors are not updated                         *\n\t***********************************************************/ /*\tclickShape = () => { */_createClass(Shape,[{key:\"clickShape\",value:function clickShape(){/*\t\tconsole.log (this.refButton);*/if(this.refButton.current.innerText===\"\"){this.refButton.current.innerHTML=this.innerHTML;}else{/* Computes the relative size of the facedraw */var shapeSizeInt=100./this.props.size;var charSizeInt=1.1*shapeSizeInt/2;var imageWidth=charSizeInt.toString()+\"vmin\";this.innerHTML=this.refButton.current.innerHTML;this.refButton.current.innerHTML=\"<img class='image' src='\"+facedraw+\"' style='width:\"+imageWidth+\"' alt='5'/>\";}}},{key:\"render\",value:function render(){var baseColor=\"#dddddd\";var backColor=randomizeColor(baseColor);var fontColor=randomizeColor(backColor);var characterInside=this.props.value;var keyValue=this.props.id;var className=this.props.name;/* Computes the relative size of the shapes and characters */var shapeSizeInt=100./this.props.size;var charSizeInt=1.128*shapeSizeInt/2;var shapeSizeStr=shapeSizeInt.toString()+\"%\";var charSizeStr=charSizeInt.toString()+\"vmin\";//console.log (charSizeStr);\nreturn/*#__PURE__*/_jsx(\"button\",{ref:this.refButton,id:keyValue,value:characterInside.toString(),className:className,style:{backgroundColor:backColor,color:fontColor,width:shapeSizeStr,height:shapeSizeStr,fontSize:charSizeStr},onClick:this.clickShape,children:characterInside},keyValue);}}]);return Shape;}(Component);","map":{"version":3,"sources":["/home/n3rd/Documents/groupProjects/360-gloriousKenobis/mosaicWithReactV2/src/App.js"],"names":["React","Component","useState","useEffect","useRef","Sound","facedraw","soundToPlay","randomNumber","randomizeColor","App","newRendering","SetNewRendering","numberCells","numberShapes","createTable","table","i","randShape","randCode","randLetter","String","fromCharCode","indexString","toString","shapeForm","push","forceRandom","backgroundColor","color","Footer","startCount","counter","SetCounter","isPlaying","SetIsPlaying","countRef","current","interval","el","document","getElementById","setInterval","currCounter","innerHTML","clearInterval","ResetCounter","handleSongFinishedPlaying","console","log","backColor","status","PLAYING","STOPPED","Shape","props","refButton","createRef","clickShape","bind","state","value","innerText","shapeSizeInt","size","charSizeInt","imageWidth","baseColor","fontColor","characterInside","keyValue","id","className","name","shapeSizeStr","charSizeStr","width","height","fontSize"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect, useRef} from 'react';\nimport './App.css';\nimport Sound from 'react-sound';\nimport facedraw from './facedraw.png';\nimport soundToPlay from './whistle.mp3';\nimport {randomNumber, randomizeColor} from './Functions.js';\n\n/************************************************************\n* This class is responsible of building the business logic  *\n* The class build the header, body and footer of the mosaic *\n************************************************************/\nexport default function App () {\n\tconst [newRendering, SetNewRendering] = useState(false);\n\tconst [numberCells] = useState(12);\n\tconst [numberShapes] = useState(2);\n\n\t/*********************************************\n\t* Function to create a table with:           *\n\t*\t\tThe shape                            *\n\t*\t\tCode to print in the foreground      *\n\t*********************************************/\n\tfunction createTable () {\n\t\tlet table = [];\n\n\t\tfor (let i = 1; i < (numberCells*numberCells + 1); i++) {\n\t\t\tlet randShape = randomNumber(0, numberShapes);\n\t\t\tlet randCode = randomNumber(65, 91);\n\t\t\tlet randLetter = String.fromCharCode (randCode);\n\t\t\tlet indexString = i.toString();\n\t\t\tlet shapeForm = 'shape' + randShape.toString();\n\t\t\ttable.push(<Shape\n\t\t\t\t\tkey = {indexString}\n\t\t\t\t\tid = {indexString}\n\t\t\t\t\tname = {shapeForm}\n\t\t\t\t\tsize = {numberCells}\n\t\t\t\t\tvalue = {randLetter} />);\n\t\t}\n\t\treturn table;\n\t}\n\t\n\t/******************************************************\n\t* Function to refresh the complete mosaic with random *\n\t* shapes, characters and colors                       *\n\t******************************************************/\n\tfunction forceRandom() {\n\t\tif (newRendering) {\n\t\t\tSetNewRendering (false);\n\t\t} else {\n\t\t\tSetNewRendering (true);\n\t\t}\n\t}\n\n\tlet table = createTable ();\n\n\treturn (\n\t\t<div className='base'>\n\t\t\t<div className='header'>\n\t\t\t\t<button\n\t\t\t\t\tclassName='circle1'\n\t\t\t\t\tstyle={{backgroundColor: 'red', color: 'red'}}\n\t\t\t\t></button>\n\t\t\t\t<button\n\t\t\t\t\tclassName='circle1'\n\t\t\t\t\tstyle={{backgroundColor: 'green', color: 'green'}}\n\t\t\t\t></button>\n\t\t\t\t<button\n\t\t\t\t\tclassName='circle1'\n\t\t\t\t\tstyle={{backgroundColor: 'yellow', color: 'yellow'}}\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t\t<div className='mosaic'>\n\t\t\t\t{table}\n\t\t\t</div>\n\t\t\t<Footer \n\t\t\t\tforceRandom={forceRandom}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\n/*********************************************************************\n* This class is responsible of building the footer of our mosaic app *\n* The footer includes the button to start/stop the timer             *\n* and the current timer value                                        *\n*********************************************************************/\nfunction Footer ({forceRandom}) {\n\tconst startCount = useState(true);\n\tconst [counter, SetCounter] = useState(60);\n\tconst [isPlaying, SetIsPlaying] = useState(false);\n\tconst countRef = useRef(counter);\n\tcountRef.current = counter;\n\n\t/**********************************************\n\t* Function to refresh the current timer value *\n\t**********************************************/\n\tuseEffect(() => {\n\t\tlet interval;\n\t\tif (startCount) {\n\t\t\tconst el = document.getElementById('counter');\n\t\t\tinterval = setInterval(() => {\n\t\t\t\tSetCounter (currCounter => currCounter - 1);\n\t\t\t\tlet currCounter = countRef.current;\n\t\t\t\tel.innerHTML = currCounter;\n\t\t\t}, 1000);\n\t\t} else {\n\t\t\tclearInterval(interval);\n\t\t}\n\t\treturn () => clearInterval(interval);\n\t}, [startCount]);\n\n\t/*******************************************************************\n\t* Function to reset the timer and prepare for next temporization   *\n\t* Also, it launches a sound when the timer reach the value of zero *\n\t*******************************************************************/\n\tconst ResetCounter = () => {\n\t\tSetCounter(60);\n\t\tforceRandom();\n\t}\n\n\t/***************************************************************\n\t* Function fired when the music ends to avoid restarting again *\n\t***************************************************************/\n\tconst handleSongFinishedPlaying = () => {\n\t\tSetIsPlaying(!isPlaying);\n\t\tconsole.log(isPlaying);\n\t}\n\t\t\n\tlet currCounter = countRef.current;\n\tlet backColor;\n\tif (currCounter === 0) {\n\t\tResetCounter();\n\t\tSetIsPlaying(!isPlaying);\n\t} else if (currCounter <= 10) {\n\t\tbackColor = 'red';\n\t} else {\n\t\tbackColor = '#dddddd';\n\t}\n\treturn (\n\t\t<div className='footer'>\n\t\t\t<div className='centered'>\n\t\t\t\t<button\n\t\t\t\t\tid='randbutton'\n\t\t\t\t\tclassName='randbutton'\n\t\t\t\t\tonClick={() => forceRandom()}\n\t\t\t\t>\n\t\t\t\t\tRandomize!\n\t\t\t\t</button>\n\t\t\t\t<label className='count_label'>\n\t\t\t\t\tTimer:\n\t\t\t\t</label>\n\t\t\t\t<label\n\t\t\t\t\tid='counter'\n\t\t\t\t\tclassName='counter'\n\t\t\t\t\tstyle={{backgroundColor: backColor}}\n\t\t\t\t>{counter}</label>\n\t\t\t</div>\n\t\t\t<Sound\n\t\t\t\turl = {soundToPlay}\n\t\t\t\tplayStatus = {isPlaying ? Sound.status.PLAYING : Sound.status.STOPPED}\n\t\t\t\tonFinishedPlaying = {handleSongFinishedPlaying}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\n/********************************************************************\n* This class is responsible for building every cell of the mosaic   *\n* The class receive the shape and the foreground character to print *\n* and calculate random color codes for these elements               *\n********************************************************************/\nclass Shape extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.refButton = React.createRef();\n\t\tthis.clickShape = this.clickShape.bind (this);\n\t\tthis.state = {\n\t\t\tvalue: null,\n\t\t\tinnerHTML: null,\n\t\t};\n\t}\n\n\t/***********************************************************\n\t* Function to update a single shape. Everytime is accessed *\n\t* the character is swapped to an image and when accessed   *\n\t* again, recovers the character associated to the shape    *\n\t* Shape and colors are not updated                         *\n\t***********************************************************/\n/*\tclickShape = () => { */\n\tclickShape () {\n/*\t\tconsole.log (this.refButton);*/\n\t\tif (this.refButton.current.innerText === \"\") {\n\t\t\tthis.refButton.current.innerHTML = this.innerHTML;\n\t\t} else {\n\t\t\t/* Computes the relative size of the facedraw */\n\t\t\tconst shapeSizeInt = 100. / this.props.size;\n\t\t\tconst charSizeInt = 1.1*shapeSizeInt / 2;\n\t\t\tconst imageWidth = charSizeInt.toString() + \"vmin\";\n\t\t\tthis.innerHTML = this.refButton.current.innerHTML;\n\t\t\tthis.refButton.current.innerHTML = \n\t\t\t\t\"<img class='image' src='\" + facedraw + \"' style='width:\" + imageWidth + \"' alt='5'/>\";\n\t\t}\n\t}\n\n\trender() {\n\t\tconst baseColor = \"#dddddd\";\n\t\tconst backColor = randomizeColor (baseColor);\n\t\tconst fontColor = randomizeColor (backColor);\n\t\tconst characterInside = this.props.value;\n\t\tconst keyValue = this.props.id;\n\t\tconst className = this.props.name;\n\t\t/* Computes the relative size of the shapes and characters */\n\t\tconst shapeSizeInt = 100. / this.props.size;\n\t\tconst charSizeInt = 1.128*shapeSizeInt / 2;\n\t\tconst shapeSizeStr = shapeSizeInt.toString() + \"%\";\n\t\tconst charSizeStr = charSizeInt.toString() + \"vmin\";\n\t\t//console.log (charSizeStr);\n\t\treturn (\n\t\t\t<button\n\t\t\t\tkey={keyValue}\n\t\t\t\tref={this.refButton}\n\t\t\t\tid={keyValue}\n\t\t\t\tvalue={characterInside.toString()}\n\t\t\t\tclassName={className}\n\t\t\t\tstyle={{backgroundColor: backColor, color: fontColor, \n\t\t\t\t\t\twidth: shapeSizeStr, height: shapeSizeStr,\n\t\t\t\t\t\tfontSize: charSizeStr}}\n\t\t\t\tonClick={this.clickShape}\n\t\t\t>\n\t\t\t\t{characterInside}\n\t\t\t</button>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}